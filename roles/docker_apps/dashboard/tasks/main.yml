- name: Ensure configuration and script directories
  file:
    path: /docker/{{item}}
    owner: root
    group: root
    mode: 0755
    state: directory
  with_items:
    - apps
    - apps/dashboard
    - apps/dashboard/config
  tags:
    - app_directory

- name: Ensure write access for docker group
  file:
    path: /docker/{{item}}
    mode: 0775
    group: docker
    recurse: yes
    state: directory
  with_items:
    - apps/dashboard
  tags:
    - write_access

- name: Install configuration file
  copy:
    src: config/dashboard-config.properties
    dest: /docker/apps/dashboard/config/dashboard-config.properties
    mode: 0644
  tags:
    - app_config
    
- name: Install docker-compose.yml
  template:
    src: docker-compose.yml
    dest: /docker/apps/dashboard/docker-compose.yml
    owner: root
    group: root
    mode: 0644
  tags:
    - docker_compose
